{"version":3,"sources":["components/services/PersonService.js","components/PersonForm.js","components/FilterForm.js","components/DisplayPersons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","newPerson","post","id","person","put","delete","PersonForm","persons","setNewName","newName","setNumber","newNumber","setPersons","setMessage","setStatus","onSubmit","e","a","async","preventDefault","name","number","length","checkDuplicates","filter","p","undefined","PersonService","concat","setTimeout","catch","error","response","window","confirm","map","onChange","target","value","handleChangePerson","trim","handleNumber","type","FilterForm","setFilter","DisplayPersons","filteredPersons","includes","personData","key","onClick","users","handleDelete","displayFilteredPersons","allPersons","Notification","message","status","className","App","useState","useEffect","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5f404225.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst baseUrl = '/api/person/';\r\n\r\nconst getPersons = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((res) => res.data);\r\n};\r\n\r\nconst createPerson = (newPerson) => {\r\n  const request = axios.post(baseUrl, newPerson);\r\n  return request.then((res) => res.data);\r\n};\r\n\r\nconst updatePerson = (id, person) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, person);\r\n  return request.then((res) => res.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nexport default {\r\n  getPersons,\r\n  createPerson,\r\n  updatePerson,\r\n  deletePerson,\r\n};\r\n","import React from 'react';\r\nimport PersonService from './services/PersonService';\r\n\r\nconst PersonForm = ({\r\n  persons,\r\n  setNewName,\r\n  newName,\r\n  setNumber,\r\n  newNumber,\r\n  setPersons,\r\n  setMessage,\r\n  setStatus,\r\n}) => {\r\n  const newPerson = async(e) => {\r\n    e.preventDefault();\r\n\r\n    const person = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    if (newName.length < 1 && newNumber.length < 1) {\r\n      setMessage('Name or number missing');\r\n      setStatus('error');\r\n\r\n    } else {\r\n\r\n\r\n      const checkDuplicates = persons.filter((p) => p.name === person.name);\r\n\r\n      if (checkDuplicates.length === 0 || checkDuplicates === undefined) {\r\n        PersonService.createPerson(person)\r\n          .then((person) => {\r\n            setPersons(persons.concat(person))\r\n            setMessage(`${person.name} was added`)\r\n            setStatus('success')\r\n            setNewName('')\r\n            setNumber('')\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch((error) =>{\r\n            \r\n            setTimeout(() => {\r\n              setMessage(error.response.data)\r\n              setStatus('error')\r\n              setNewName('')\r\n            setNumber('')\r\n            }, 5000)\r\n})\r\n      } else {\r\n        const duplicateDialog = window.confirm(\r\n          `${person.name} already exists, add new number?`\r\n        );\r\n\r\n        if (duplicateDialog) {\r\n          PersonService.updatePerson(checkDuplicates[0].id, person)\r\n            .then((response) => {\r\n              setPersons(\r\n                persons.map((p) =>\r\n                  p.id !== checkDuplicates[0].id ? p : response\r\n                )\r\n              );\r\n            })\r\n            .then(setNewName(''), setNumber(''))\r\n            .catch(error => setMessage(error),\r\n          setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000))\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChangePerson = (e) => {\r\n    setNewName(e.target.value);\r\n  };\r\n\r\n  const handleNumber = (e) => {\r\n    e.preventDefault();\r\n    setNumber(e.target.value.trim());\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={newPerson}>\r\n      <div>\r\n        name: <input onChange={(e) => handleChangePerson(e)} value={newName} />\r\n      </div>\r\n\r\n      <div>\r\n        number: <input onChange={(e) => handleNumber(e)} value={newNumber} />\r\n      </div>\r\n      <button type=\"submit\">add</button>\r\n      <div>debug: {newName}</div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst FilterForm = ({ persons, filter, setFilter }) => {\r\n  const handleFilter = (e) => {\r\n    e.preventDefault();\r\n    setFilter(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      Search: <input onChange={handleFilter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterForm;\r\n","import React from 'react';\r\nimport PersonService from './services/PersonService';\r\n\r\nconst DisplayPersons = ({\r\n  persons,\r\n  filter,\r\n  setPersons,\r\n  setMessage,\r\n  setStatus,\r\n}) => {\r\n  const filteredPersons = persons.filter((p) =>\r\n    p.name.includes(filter) ? p : ''\r\n  );\r\n\r\n  const handleDelete = (data) => {\r\n    //window.confirm(`Rly delete, ${data.name}?`);\r\n\r\n    const confirmDelete = window.confirm(`Rly delete, ${data.name}?`);\r\n\r\n    if (confirmDelete) {\r\n      PersonService.deletePerson(data.id)\r\n        .then(() => {\r\n          const users = persons.filter((p) => p.id !== data.id)\r\n          setPersons(users)\r\n          setMessage(`${data.name} was deleted`);\r\n          setStatus('error');\r\n           setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n        })\r\n        .catch(\r\n          setMessage(`${data.name} was not found on the server`),\r\n          setStatus('error')\r\n        );\r\n    }\r\n  };\r\n\r\n  const personData = (data) => {\r\n    return (\r\n      <li key={data.id}>\r\n        Name: {data.name} - {data.number}\r\n        <button onClick={() => handleDelete(data)}>Delete</button>\r\n      </li>\r\n    );\r\n  };\r\n\r\n  const displayFilteredPersons = filteredPersons.map((p) => personData(p));\r\n\r\n  const allPersons = persons.map((p) => personData(p));\r\n\r\n  return (\r\n    <div>\r\n      <ul>{filter.length !==0 ? displayFilteredPersons : allPersons}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayPersons;\r\n","import React from 'react';\r\n\r\nconst Notification = ({ message, person, status }) => {\r\n  if (message === null) {\r\n    return null;\r\n  } else {\r\n    return (\r\n      <div className={status}>\r\n        {person} {message}\r\n      </div>\r\n    );\r\n\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PersonForm from './components/PersonForm';\r\nimport FilterForm from './components/FilterForm';\r\nimport DisplayPersons from './components/DisplayPersons';\r\nimport PersonService from './components/services/PersonService';\r\nimport Notification from './components/Notification';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNumber] = useState('');\r\n  const [filter, setFilter] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n  const [status, setStatus] = useState('');\r\n\r\n  useEffect(() => {\r\n    PersonService.getPersons().then((res) => {\r\n      setPersons(res);\r\n    });\r\n  }, [setNumber]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>PhoneBook</h2>\r\n      <Notification message={message} status={status} />\r\n      <FilterForm setFilter={setFilter}/>\r\n      <h2>Add a new person:</h2>\r\n      <PersonForm\r\n        persons={persons}\r\n        setNewName={setNewName}\r\n        newName={newName}\r\n        setNumber={setNumber}\r\n        newNumber={newNumber}\r\n        setPersons={setPersons}\r\n        setMessage={setMessage}\r\n        setStatus={setStatus}\r\n      />\r\n      <h2>Numbers</h2>\r\n      {persons.length ? (\r\n        <DisplayPersons\r\n          persons={persons}\r\n          setPersons={setPersons}\r\n          setMessage={setMessage}\r\n          setStatus={setStatus}\r\n          filter={filter}\r\n        />) : null}\r\n    </div>\r\n  );\r\n};\r\nexport default App;\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}